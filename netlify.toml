[build]
  # 1. Generate Prisma Client
  # 2. Apply migrations (Safe for production)
  # 3. Build the Next.js app
  command = "npx prisma generate && npx prisma migrate deploy && npm run build"
  publish = ".next"

[[plugins]]
  package = "@netlify/plugin-nextjs"

[build.environment]
  NODE_VERSION = "20"
  # This helps bypass the Husky error if it still lingers
  NPM_CONFIG_IGNORE_SCRIPTS = "true"